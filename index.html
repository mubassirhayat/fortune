<!DOCTYPE html><!--

This page is automatically generated. See:
https://github.com/fortunejs/fortune/tree/master/website

--><html lang="en"><head><title>Fortune.js</title><meta name="description" content="High-level I&#x2F;O library for web applications."><meta name="keywords" content="adapter,api,data,http,hypermedia,rest,serializer"><meta name="viewport" content="width=device-width,initial-scale=1"><meta charset="utf-8"><link rel="icon" href="./assets/piggu.png"><link rel="stylesheet" href="./assets/style.css"></head><body><main><nav><a href="./"><img src="./assets/piggu.svg" alt="Piggu" class="logo"></a><!--
        --><a href="./"><img src="./assets/fortune_type.svg" alt="Fortune.js" class="type"></a><ul class="docs"><li><a href="./getting-started/">Getting Started<span>⚙</span></a></li><li><a href="./plugins/">Plugins<span>⚒</span></a></li><li><a href="./changelog/">Changelog<span>⚐</span></a></li><li><a href="./contributing/">Contributing<span>✤</span></a></li><li><a href="./caveats/">Caveats<span>⚖</span></a></li><li><a href="./api/">API Reference<span>⏣</span></a></li></ul><h4>Fortune</h4><ul class="api"><li><a href="./api/#fortune">Fortune</a></li><li><a href="./api/#fortune-constructor">constructor</a></li><li><a href="./api/#fortune-connect">connect</a></li><li><a href="./api/#fortune-disconnect">disconnect</a></li><li><a href="./api/#fortune-definetype">defineType</a></li><li><a href="./api/#fortune-request">request</a></li><li><a href="./api/#fortune-transform">transform</a></li><li><a href="./api/#fortune-transforminput">transformInput</a></li><li><a href="./api/#fortune-transformoutput">transformOutput</a></li><li><a href="./api/#fortune-create">create</a></li></ul><h4>Adapter</h4><ul class="api"><li><a href="./api/#adapter">Adapter</a></li><li><a href="./api/#adapter-connect">connect</a></li><li><a href="./api/#adapter-disconnect">disconnect</a></li><li><a href="./api/#adapter-create">create</a></li><li><a href="./api/#adapter-find">find</a></li><li><a href="./api/#adapter-update">update</a></li><li><a href="./api/#adapter-delete">delete</a></li><li><a href="./api/#adapter-begintransaction">beginTransaction</a></li><li><a href="./api/#adapter-endtransaction">endTransaction</a></li><li><a href="./api/#adapter-applyoperators">applyOperators</a></li></ul><h4>Serializer</h4><ul class="api"><li><a href="./api/#serializer">Serializer</a></li><li><a href="./api/#serializer-processrequest">processRequest</a></li><li><a href="./api/#serializer-processresponse">processResponse</a></li><li><a href="./api/#serializer-showresponse">showResponse</a></li><li><a href="./api/#serializer-showerror">showError</a></li><li><a href="./api/#serializer-parsecreate">parseCreate</a></li><li><a href="./api/#serializer-parseupdate">parseUpdate</a></li><li class="property"><a href="./api/#serializer-id">id</a></li></ul><h4>Net</h4><ul class="api"><li><a href="./api/#net-http">http</a></li></ul></nav><section><header><a href="https://www.npmjs.com/package/fortune">npm</a><!--
          --><a href="https://github.com/fortunejs/fortune">GitHub</a></header><article><div class="home"><h4>Info</h4><h1>Fortune is a <em>high-level I/O library for web applications</em>, in the server and the browser.</h1><p>The latest version is <strong>1.0.0-beta.26</strong>. Get it from <code>npm</code>:</p><div class="download"><pre><code>npm install fortune@latest --save</code></pre><!--
    --><a href="https://github.com/fortunejs/fortune/archive/master.zip"><span>⚑</span>Download</a></div><hr><h4>Example</h4></div><p>Here is an example server-side application, including a web server:</p><pre><code class="lang-js">import fortune <span class="hljs-built_in">from</span> <span class="hljs-string">'fortune'</span>
import <span class="hljs-keyword">http</span> <span class="hljs-built_in">from</span> <span class="hljs-string">'http'</span>

const store = fortune.<span class="hljs-built_in">create</span>()
const server = <span class="hljs-keyword">http</span>.createServer(fortune.net.<span class="hljs-keyword">http</span>(store))
</code></pre><p>This sets up an instance of Fortune with default options, and an HTTP server instance. The <code>fortune.net.http</code> module returns a listener function that does content negotiation to determine which serializers to use for I/O, and forwards Node&#39;s built-in <code>request</code> and <code>response</code> objects to the serializers.</p><pre><code class="lang-js">store.defineType(<span class="hljs-string">'user'</span>, {
<span class="hljs-label">  name:</span> { <span class="hljs-string">type:</span> String },
<span class="hljs-label">  groups:</span> { <span class="hljs-string">link:</span> <span class="hljs-string">'group'</span>, <span class="hljs-string">inverse:</span> <span class="hljs-string">'members'</span>, <span class="hljs-string">isArray:</span> <span class="hljs-literal">true</span> }
})

store.defineType(<span class="hljs-string">'group'</span>, {
<span class="hljs-label">  name:</span> { <span class="hljs-string">type:</span> String },
<span class="hljs-label">  members:</span> { <span class="hljs-string">link:</span> <span class="hljs-string">'user'</span>, <span class="hljs-string">inverse:</span> <span class="hljs-string">'groups'</span>, <span class="hljs-string">isArray:</span> <span class="hljs-literal">true</span> }
})
</code></pre><p>Defining record types. There is a many-to-many relationship between <code>user</code> and <code>group</code> on the <code>groups</code> and <code>members</code> fields respectively.</p><pre><code class="lang-js">store.<span class="hljs-function"><span class="hljs-title">connect</span><span class="hljs-params">()</span></span>.<span class="hljs-function"><span class="hljs-title">then</span><span class="hljs-params">(()</span></span> =&gt; server.<span class="hljs-function"><span class="hljs-title">listen</span><span class="hljs-params">(<span class="hljs-number">1337</span>)</span></span>)
</code></pre><p>Finally we need to call <code>connect</code> before we do anything with the instance. Then we can let the server listen, which yields a HTTP API that conforms to the <a href="http://micro-api.org">Micro API</a> and <a href="http://jsonapi.org">JSON API</a> specifications. By default, it is backed by an embedded document store, <a href="https://github.com/louischatriot/nedb">NeDB</a>, which runs in memory by default, but has options to persist to disk.</p><p>For the Micro API serializer, we get a set of internal pre-defined routes. Note that by default, the routes are obfuscated to the client, to encourage the use of hypermedia.</p><table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Route (unobfuscated)</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/</code></td><td style="text-align:left">Get the entry point including links to collections.</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/:type</code></td><td style="text-align:left">Get a collection of records belonging to that type.</td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/:type</code></td><td style="text-align:left">Create a record belonging to that type.</td></tr><tr><td style="text-align:left"><code>PATCH</code></td><td style="text-align:left"><code>/:type</code></td><td style="text-align:left">Update records belonging to that type.</td></tr><tr><td style="text-align:left"><code>DELETE</code></td><td style="text-align:left"><code>/:type</code></td><td style="text-align:left">Delete an entire collection of records by type.</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/:type/:ids</code></td><td style="text-align:left">Get records of a type by comma separated IDs.</td></tr><tr><td style="text-align:left"><code>PATCH</code></td><td style="text-align:left"><code>/:type/:ids</code></td><td style="text-align:left">Update records of a type by comma separated IDs.</td></tr><tr><td style="text-align:left"><code>DELETE</code></td><td style="text-align:left"><code>/:type/:ids</code></td><td style="text-align:left">Delete records of a type by comma separated IDs.</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/:type/:ids/:link</code></td><td style="text-align:left">Get related records corresponding to a type and IDs.</td></tr><tr><td style="text-align:left"><code>PATCH</code></td><td style="text-align:left"><code>/:type/:ids/:link</code></td><td style="text-align:left">Update related records corresponding to a type and IDs.</td></tr><tr><td style="text-align:left"><code>DELETE</code></td><td style="text-align:left"><code>/:type/:ids/:link</code></td><td style="text-align:left">Delete related records corresponding to a type and IDs.</td></tr></tbody></table><p>The JSON API serializer emits routes specified <a href="http://jsonapi.org/recommendations/">here</a>.</p></article><footer><p>&copy; 2015 &nbsp;&mdash;&nbsp; <a href="https://raw.githubusercontent.com/fortunejs/fortune/master/LICENSE">MIT License</a></p></footer></section></main></body></html>